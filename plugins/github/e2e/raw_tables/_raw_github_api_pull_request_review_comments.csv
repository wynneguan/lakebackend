id,params,data,url,input,created_at
1,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/300245643"",""pull_request_review_id"":257849164,""id"":300245643,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMDI0NTY0Mw=="",""diff_hunk"":""@@ -46,27 +45,28 @@ type Worker struct {\n func (w *Worker) run() {\n \tw.pool.incRunning()\n \tgo func() {\n-\t\tdefer func() {\n-\t\t\tif p := recover(); p != nil {\n-\t\t\t\tw.pool.decRunning()\n-\t\t\t\tw.pool.workerCache.Put(w)\n-\t\t\t\tif w.pool.PanicHandler != nil {\n-\t\t\t\t\tw.pool.PanicHandler(p)\n-\t\t\t\t} else {\n-\t\t\t\t\tlog.Printf(\""worker exits from a panic: %v\"", p)\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}()\n-\n \t\tfor f := range w.task {\n-\t\t\tif nil == f {\n+\t\t\tif f == nil {\n \t\t\t\tw.pool.decRunning()\n \t\t\t\tw.pool.workerCache.Put(w)\n \t\t\t\treturn\n \t\t\t}\n-\t\t\tf()\n-\t\t\tif ok := w.pool.revertWorker(w); !ok {\n-\t\t\t\tbreak\n+\t\t\tif w.pool.PanicHandler == nil {\n+\t\t\t\t// if PanicHandler is nil, we do nothing,just throw out.\n+\t\t\t\tf()\n+\t\t\t\tw.pool.revertWorker(w)\n+\t\t\t}else {\n+\t\t\t\t// recover job and make worker continue.\n+\t\t\t\tfunc(){\n+\t\t\t\t\tdefer func() {"",""path"":""worker.go"",""position"":41,""original_position"":41,""commit_id"":""39f04c6e65b76b5f20abd3ca0606db4cd038e5c2"",""original_commit_id"":""39f04c6e65b76b5f20abd3ca0606db4cd038e5c2"",""user"":{""login"":""panjf2000"",""id"":7496278,""node_id"":""MDQ6VXNlcjc0OTYyNzg="",""avatar_url"":""https://avatars.githubusercontent.com/u/7496278?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/panjf2000"",""html_url"":""https://github.com/panjf2000"",""followers_url"":""https://api.github.com/users/panjf2000/followers"",""following_url"":""https://api.github.com/users/panjf2000/following{/other_user}"",""gists_url"":""https://api.github.com/users/panjf2000/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/panjf2000/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/panjf2000/subscriptions"",""organizations_url"":""https://api.github.com/users/panjf2000/orgs"",""repos_url"":""https://api.github.com/users/panjf2000/repos"",""events_url"":""https://api.github.com/users/panjf2000/events{/privacy}"",""received_events_url"":""https://api.github.com/users/panjf2000/received_events"",""type"":""User"",""site_admin"":false},""body"":"" chinese ， chinese goroutine chinese ？"",""created_at"":""2019-07-04T06:32:11Z"",""updated_at"":""2019-07-18T15:26:41Z"",""html_url"":""https://github.com/panjf2000/ants/pull/36#discussion_r300245643"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/36"",""author_association"":""OWNER"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/300245643""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/36#discussion_r300245643""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/36""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/300245643/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":61,""original_line"":61,""side"":""RIGHT""}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
2,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/300246398"",""pull_request_review_id"":257849164,""id"":300246398,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMDI0NjM5OA=="",""diff_hunk"":""@@ -46,27 +45,28 @@ type Worker struct {\n func (w *Worker) run() {\n \tw.pool.incRunning()\n \tgo func() {\n-\t\tdefer func() {\n-\t\t\tif p := recover(); p != nil {\n-\t\t\t\tw.pool.decRunning()\n-\t\t\t\tw.pool.workerCache.Put(w)\n-\t\t\t\tif w.pool.PanicHandler != nil {\n-\t\t\t\t\tw.pool.PanicHandler(p)\n-\t\t\t\t} else {\n-\t\t\t\t\tlog.Printf(\""worker exits from a panic: %v\"", p)\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}()\n-\n \t\tfor f := range w.task {\n-\t\t\tif nil == f {\n+\t\t\tif f == nil {\n \t\t\t\tw.pool.decRunning()\n \t\t\t\tw.pool.workerCache.Put(w)\n \t\t\t\treturn\n \t\t\t}\n-\t\t\tf()\n-\t\t\tif ok := w.pool.revertWorker(w); !ok {\n-\t\t\t\tbreak\n+\t\t\tif w.pool.PanicHandler == nil {\n+\t\t\t\t// if PanicHandler is nil, we do nothing,just throw out.\n+\t\t\t\tf()\n+\t\t\t\tw.pool.revertWorker(w)\n+\t\t\t}else {\n+\t\t\t\t// recover job and make worker continue.\n+\t\t\t\tfunc(){\n+\t\t\t\t\tdefer func() {"",""path"":""worker.go"",""position"":41,""original_position"":41,""commit_id"":""39f04c6e65b76b5f20abd3ca0606db4cd038e5c2"",""original_commit_id"":""39f04c6e65b76b5f20abd3ca0606db4cd038e5c2"",""user"":{""login"":""panjf2000"",""id"":7496278,""node_id"":""MDQ6VXNlcjc0OTYyNzg="",""avatar_url"":""https://avatars.githubusercontent.com/u/7496278?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/panjf2000"",""html_url"":""https://github.com/panjf2000"",""followers_url"":""https://api.github.com/users/panjf2000/followers"",""following_url"":""https://api.github.com/users/panjf2000/following{/other_user}"",""gists_url"":""https://api.github.com/users/panjf2000/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/panjf2000/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/panjf2000/subscriptions"",""organizations_url"":""https://api.github.com/users/panjf2000/orgs"",""repos_url"":""https://api.github.com/users/panjf2000/repos"",""events_url"":""https://api.github.com/users/panjf2000/events{/privacy}"",""received_events_url"":""https://api.github.com/users/panjf2000/received_events"",""type"":""User"",""site_admin"":false},""body"":""`f()` chinese ？"",""created_at"":""2019-07-04T06:35:07Z"",""updated_at"":""2019-07-18T15:26:41Z"",""html_url"":""https://github.com/panjf2000/ants/pull/36#discussion_r300246398"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/36"",""author_association"":""OWNER"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/300246398""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/36#discussion_r300246398""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/36""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/300246398/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":61,""original_line"":61,""side"":""RIGHT"",""in_reply_to_id"":300245643}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
3,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307667007"",""pull_request_review_id"":267089136,""id"":307667007,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzY2NzAwNw=="",""diff_hunk"":""@@ -33,7 +33,7 @@ const (\n \tDEFAULT_ANTS_POOL_SIZE = math.MaxInt32\n \n \t// DEFAULT_CLEAN_INTERVAL_TIME is the interval time to clean up goroutines.\n-\tDEFAULT_CLEAN_INTERVAL_TIME = 1\n+\tDEFAULT_CLEAN_INTERVAL_TIME = 60"",""path"":""ants.go"",""position"":null,""original_position"":5,""commit_id"":""5dc8b9a71737eb57dc03fbbe3eb9010ff6c3fbb6"",""original_commit_id"":""807ff757e51dbc3c7731996d171a1ff1d85297fc"",""user"":{""login"":""panjf2000"",""id"":7496278,""node_id"":""MDQ6VXNlcjc0OTYyNzg="",""avatar_url"":""https://avatars.githubusercontent.com/u/7496278?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/panjf2000"",""html_url"":""https://github.com/panjf2000"",""followers_url"":""https://api.github.com/users/panjf2000/followers"",""following_url"":""https://api.github.com/users/panjf2000/following{/other_user}"",""gists_url"":""https://api.github.com/users/panjf2000/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/panjf2000/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/panjf2000/subscriptions"",""organizations_url"":""https://api.github.com/users/panjf2000/orgs"",""repos_url"":""https://api.github.com/users/panjf2000/repos"",""events_url"":""https://api.github.com/users/panjf2000/events{/privacy}"",""received_events_url"":""https://api.github.com/users/panjf2000/received_events"",""type"":""User"",""site_admin"":false},""body"":""I don't think assigning this variable to a oversize value is a good idea, threre are different scenarios which should have different interval durations to clean up goroutines, so could you please make `DEFAULT_CLEAN_INTERVAL_TIME ` configurable? Maybe adding a new function that accepts this variable as its argument."",""created_at"":""2019-07-26T09:38:21Z"",""updated_at"":""2019-07-26T14:21:07Z"",""html_url"":""https://github.com/panjf2000/ants/pull/40#discussion_r307667007"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/40"",""author_association"":""OWNER"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307667007""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/40#discussion_r307667007""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/40""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307667007/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":null,""original_line"":36,""side"":""RIGHT""}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
4,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307667451"",""pull_request_review_id"":267089136,""id"":307667451,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzY2NzQ1MQ=="",""diff_hunk"":""@@ -268,13 +268,13 @@ func TestPurge(t *testing.T) {\n }\n \n func TestRestCodeCoverage(t *testing.T) {"",""path"":""ants_test.go"",""position"":188,""original_position"":3,""commit_id"":""5dc8b9a71737eb57dc03fbbe3eb9010ff6c3fbb6"",""original_commit_id"":""807ff757e51dbc3c7731996d171a1ff1d85297fc"",""user"":{""login"":""panjf2000"",""id"":7496278,""node_id"":""MDQ6VXNlcjc0OTYyNzg="",""avatar_url"":""https://avatars.githubusercontent.com/u/7496278?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/panjf2000"",""html_url"":""https://github.com/panjf2000"",""followers_url"":""https://api.github.com/users/panjf2000/followers"",""following_url"":""https://api.github.com/users/panjf2000/following{/other_user}"",""gists_url"":""https://api.github.com/users/panjf2000/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/panjf2000/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/panjf2000/subscriptions"",""organizations_url"":""https://api.github.com/users/panjf2000/orgs"",""repos_url"":""https://api.github.com/users/panjf2000/repos"",""events_url"":""https://api.github.com/users/panjf2000/events{/privacy}"",""received_events_url"":""https://api.github.com/users/panjf2000/received_events"",""type"":""User"",""site_admin"":false},""body"":""I believe you should add new unit tests for your new feature."",""created_at"":""2019-07-26T09:39:24Z"",""updated_at"":""2019-07-26T14:21:07Z"",""html_url"":""https://github.com/panjf2000/ants/pull/40#discussion_r307667451"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/40"",""author_association"":""OWNER"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307667451""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/40#discussion_r307667451""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/40""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307667451/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":419,""original_line"":419,""side"":""RIGHT""}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
5,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307669178"",""pull_request_review_id"":267089136,""id"":307669178,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzY2OTE3OA=="",""diff_hunk"":""@@ -24,6 +24,7 @@ package ants\n \n import ("",""path"":""worker.go"",""position"":2,""original_position"":2,""commit_id"":""5dc8b9a71737eb57dc03fbbe3eb9010ff6c3fbb6"",""original_commit_id"":""807ff757e51dbc3c7731996d171a1ff1d85297fc"",""user"":{""login"":""panjf2000"",""id"":7496278,""node_id"":""MDQ6VXNlcjc0OTYyNzg="",""avatar_url"":""https://avatars.githubusercontent.com/u/7496278?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/panjf2000"",""html_url"":""https://github.com/panjf2000"",""followers_url"":""https://api.github.com/users/panjf2000/followers"",""following_url"":""https://api.github.com/users/panjf2000/following{/other_user}"",""gists_url"":""https://api.github.com/users/panjf2000/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/panjf2000/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/panjf2000/subscriptions"",""organizations_url"":""https://api.github.com/users/panjf2000/orgs"",""repos_url"":""https://api.github.com/users/panjf2000/repos"",""events_url"":""https://api.github.com/users/panjf2000/events{/privacy}"",""received_events_url"":""https://api.github.com/users/panjf2000/received_events"",""type"":""User"",""site_admin"":false},""body"":""You omitted the `worker_func.go`, please update it."",""created_at"":""2019-07-26T09:43:56Z"",""updated_at"":""2019-07-26T14:21:07Z"",""html_url"":""https://github.com/panjf2000/ants/pull/40#discussion_r307669178"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/40"",""author_association"":""OWNER"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307669178""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/40#discussion_r307669178""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/40""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307669178/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":25,""original_line"":25,""side"":""RIGHT""}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
6,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307671676"",""pull_request_review_id"":267094793,""id"":307671676,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzY3MTY3Ng=="",""diff_hunk"":""@@ -24,6 +24,7 @@ package ants\n \n import ("",""path"":""worker.go"",""position"":2,""original_position"":2,""commit_id"":""5dc8b9a71737eb57dc03fbbe3eb9010ff6c3fbb6"",""original_commit_id"":""807ff757e51dbc3c7731996d171a1ff1d85297fc"",""user"":{""login"":""Anteoy"",""id"":17495446,""node_id"":""MDQ6VXNlcjE3NDk1NDQ2"",""avatar_url"":""https://avatars.githubusercontent.com/u/17495446?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/Anteoy"",""html_url"":""https://github.com/Anteoy"",""followers_url"":""https://api.github.com/users/Anteoy/followers"",""following_url"":""https://api.github.com/users/Anteoy/following{/other_user}"",""gists_url"":""https://api.github.com/users/Anteoy/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/Anteoy/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/Anteoy/subscriptions"",""organizations_url"":""https://api.github.com/users/Anteoy/orgs"",""repos_url"":""https://api.github.com/users/Anteoy/repos"",""events_url"":""https://api.github.com/users/Anteoy/events{/privacy}"",""received_events_url"":""https://api.github.com/users/Anteoy/received_events"",""type"":""User"",""site_admin"":false},""body"":""got it"",""created_at"":""2019-07-26T09:50:06Z"",""updated_at"":""2019-07-26T14:21:07Z"",""html_url"":""https://github.com/panjf2000/ants/pull/40#discussion_r307671676"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/40"",""author_association"":""CONTRIBUTOR"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307671676""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/40#discussion_r307671676""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/40""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307671676/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":25,""original_line"":25,""side"":""RIGHT"",""in_reply_to_id"":307669178}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
7,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307672146"",""pull_request_review_id"":267095424,""id"":307672146,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzY3MjE0Ng=="",""diff_hunk"":""@@ -268,13 +268,13 @@ func TestPurge(t *testing.T) {\n }\n \n func TestRestCodeCoverage(t *testing.T) {"",""path"":""ants_test.go"",""position"":188,""original_position"":3,""commit_id"":""5dc8b9a71737eb57dc03fbbe3eb9010ff6c3fbb6"",""original_commit_id"":""807ff757e51dbc3c7731996d171a1ff1d85297fc"",""user"":{""login"":""Anteoy"",""id"":17495446,""node_id"":""MDQ6VXNlcjE3NDk1NDQ2"",""avatar_url"":""https://avatars.githubusercontent.com/u/17495446?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/Anteoy"",""html_url"":""https://github.com/Anteoy"",""followers_url"":""https://api.github.com/users/Anteoy/followers"",""following_url"":""https://api.github.com/users/Anteoy/following{/other_user}"",""gists_url"":""https://api.github.com/users/Anteoy/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/Anteoy/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/Anteoy/subscriptions"",""organizations_url"":""https://api.github.com/users/Anteoy/orgs"",""repos_url"":""https://api.github.com/users/Anteoy/repos"",""events_url"":""https://api.github.com/users/Anteoy/events{/privacy}"",""received_events_url"":""https://api.github.com/users/Anteoy/received_events"",""type"":""User"",""site_admin"":false},""body"":""sure, I will add."",""created_at"":""2019-07-26T09:51:31Z"",""updated_at"":""2019-07-26T14:21:07Z"",""html_url"":""https://github.com/panjf2000/ants/pull/40#discussion_r307672146"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/40"",""author_association"":""CONTRIBUTOR"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307672146""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/40#discussion_r307672146""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/40""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307672146/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":419,""original_line"":419,""side"":""RIGHT"",""in_reply_to_id"":307667451}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
8,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307672417"",""pull_request_review_id"":267095785,""id"":307672417,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzY3MjQxNw=="",""diff_hunk"":""@@ -33,7 +33,7 @@ const (\n \tDEFAULT_ANTS_POOL_SIZE = math.MaxInt32\n \n \t// DEFAULT_CLEAN_INTERVAL_TIME is the interval time to clean up goroutines.\n-\tDEFAULT_CLEAN_INTERVAL_TIME = 1\n+\tDEFAULT_CLEAN_INTERVAL_TIME = 60"",""path"":""ants.go"",""position"":null,""original_position"":5,""commit_id"":""5dc8b9a71737eb57dc03fbbe3eb9010ff6c3fbb6"",""original_commit_id"":""807ff757e51dbc3c7731996d171a1ff1d85297fc"",""user"":{""login"":""Anteoy"",""id"":17495446,""node_id"":""MDQ6VXNlcjE3NDk1NDQ2"",""avatar_url"":""https://avatars.githubusercontent.com/u/17495446?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/Anteoy"",""html_url"":""https://github.com/Anteoy"",""followers_url"":""https://api.github.com/users/Anteoy/followers"",""following_url"":""https://api.github.com/users/Anteoy/following{/other_user}"",""gists_url"":""https://api.github.com/users/Anteoy/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/Anteoy/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/Anteoy/subscriptions"",""organizations_url"":""https://api.github.com/users/Anteoy/orgs"",""repos_url"":""https://api.github.com/users/Anteoy/repos"",""events_url"":""https://api.github.com/users/Anteoy/events{/privacy}"",""received_events_url"":""https://api.github.com/users/Anteoy/received_events"",""type"":""User"",""site_admin"":false},""body"":""I will think about it"",""created_at"":""2019-07-26T09:52:20Z"",""updated_at"":""2019-07-26T14:21:07Z"",""html_url"":""https://github.com/panjf2000/ants/pull/40#discussion_r307672417"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/40"",""author_association"":""CONTRIBUTOR"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307672417""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/40#discussion_r307672417""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/40""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307672417/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":null,""original_line"":36,""side"":""RIGHT"",""in_reply_to_id"":307667007}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
9,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307675200"",""pull_request_review_id"":267099413,""id"":307675200,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzY3NTIwMA=="",""diff_hunk"":""@@ -33,7 +33,7 @@ const (\n \tDEFAULT_ANTS_POOL_SIZE = math.MaxInt32\n \n \t// DEFAULT_CLEAN_INTERVAL_TIME is the interval time to clean up goroutines.\n-\tDEFAULT_CLEAN_INTERVAL_TIME = 1\n+\tDEFAULT_CLEAN_INTERVAL_TIME = 60"",""path"":""ants.go"",""position"":null,""original_position"":5,""commit_id"":""5dc8b9a71737eb57dc03fbbe3eb9010ff6c3fbb6"",""original_commit_id"":""807ff757e51dbc3c7731996d171a1ff1d85297fc"",""user"":{""login"":""Anteoy"",""id"":17495446,""node_id"":""MDQ6VXNlcjE3NDk1NDQ2"",""avatar_url"":""https://avatars.githubusercontent.com/u/17495446?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/Anteoy"",""html_url"":""https://github.com/Anteoy"",""followers_url"":""https://api.github.com/users/Anteoy/followers"",""following_url"":""https://api.github.com/users/Anteoy/following{/other_user}"",""gists_url"":""https://api.github.com/users/Anteoy/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/Anteoy/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/Anteoy/subscriptions"",""organizations_url"":""https://api.github.com/users/Anteoy/orgs"",""repos_url"":""https://api.github.com/users/Anteoy/repos"",""events_url"":""https://api.github.com/users/Anteoy/events{/privacy}"",""received_events_url"":""https://api.github.com/users/Anteoy/received_events"",""type"":""User"",""site_admin"":false},""body"":"" When the pool size is too large , Performance  will drop by the lock . Locking at high concurrency is like an atomic bomb. So I think it should be changed. Because it's the default pool value. Many user will use self-defined pool by NewPool. Of course, it is ok to not change.\r\n"",""created_at"":""2019-07-26T09:59:42Z"",""updated_at"":""2019-07-26T14:21:07Z"",""html_url"":""https://github.com/panjf2000/ants/pull/40#discussion_r307675200"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/40"",""author_association"":""CONTRIBUTOR"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307675200""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/40#discussion_r307675200""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/40""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307675200/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":null,""original_line"":36,""side"":""RIGHT"",""in_reply_to_id"":307667007}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
10,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307686223"",""pull_request_review_id"":267113847,""id"":307686223,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwNzY4NjIyMw=="",""diff_hunk"":""@@ -33,7 +33,7 @@ const (\n \tDEFAULT_ANTS_POOL_SIZE = math.MaxInt32\n \n \t// DEFAULT_CLEAN_INTERVAL_TIME is the interval time to clean up goroutines.\n-\tDEFAULT_CLEAN_INTERVAL_TIME = 1\n+\tDEFAULT_CLEAN_INTERVAL_TIME = 60"",""path"":""ants.go"",""position"":null,""original_position"":5,""commit_id"":""5dc8b9a71737eb57dc03fbbe3eb9010ff6c3fbb6"",""original_commit_id"":""807ff757e51dbc3c7731996d171a1ff1d85297fc"",""user"":{""login"":""Anteoy"",""id"":17495446,""node_id"":""MDQ6VXNlcjE3NDk1NDQ2"",""avatar_url"":""https://avatars.githubusercontent.com/u/17495446?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/Anteoy"",""html_url"":""https://github.com/Anteoy"",""followers_url"":""https://api.github.com/users/Anteoy/followers"",""following_url"":""https://api.github.com/users/Anteoy/following{/other_user}"",""gists_url"":""https://api.github.com/users/Anteoy/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/Anteoy/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/Anteoy/subscriptions"",""organizations_url"":""https://api.github.com/users/Anteoy/orgs"",""repos_url"":""https://api.github.com/users/Anteoy/repos"",""events_url"":""https://api.github.com/users/Anteoy/events{/privacy}"",""received_events_url"":""https://api.github.com/users/Anteoy/received_events"",""type"":""User"",""site_admin"":false},""body"":""I think we can modify the New method and periodicallyPurge, it can be used as the next enhancement. I restored it for this pr. May it can be another pr for this."",""created_at"":""2019-07-26T10:33:56Z"",""updated_at"":""2019-07-26T14:21:07Z"",""html_url"":""https://github.com/panjf2000/ants/pull/40#discussion_r307686223"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/40"",""author_association"":""CONTRIBUTOR"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307686223""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/40#discussion_r307686223""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/40""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/307686223/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":null,""original_line"":36,""side"":""RIGHT"",""in_reply_to_id"":307667007}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
11,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315493235"",""pull_request_review_id"":276914383,""id"":315493235,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNTQ5MzIzNQ=="",""diff_hunk"":""@@ -416,6 +416,78 @@ func TestPurgePreMalloc(t *testing.T) {\n \t}\n }\n \n+func TestNonblockingSubmit(t *testing.T) {\n+\tpoolSize := 10\n+\tp, err := ants.NewPool(poolSize)\n+\tif err != nil {\n+\t\tt.Fatalf(\""create TimingPool failed: %s\"", err.Error())\n+\t}\n+\tp.NonblockingSubmit = true\n+\tdefer p.Release()\n+\tfor i := 0; i < poolSize-1; i++ {\n+\t\tif err := p.Submit(longRunningFunc); err != nil {\n+\t\t\tt.Fatalf(\""nonblocking submit when pool is not full shouldn't return error\"")\n+\t\t}\n+\t}\n+\tch := make(chan struct{})\n+\tf := func() {\n+\t\t<-ch\n+\t}\n+\t// p is full now.\n+\tif err := p.Submit(f); err != nil {\n+\t\tt.Fatalf(\""nonblocking submit when pool is not full shouldn't return error\"")\n+\t}\n+\tif err := p.Submit(demoFunc); err == nil || err != ants.ErrPoolBlocked {\n+\t\tt.Fatalf(\""nonblocking submit when pool is full should get an ErrPoolBlocked\"")\n+\t}\n+\t// interrupt f to get an available worker\n+\tclose(ch)\n+\ttime.Sleep(1 * time.Second)\n+\tif err := p.Submit(f); err != nil {\n+\t\tt.Fatalf(\""nonblocking submit when pool is not full shouldn't return error\"")\n+\t}\n+}\n+\n+func TestMaxBlockingSubmit(t *testing.T) {\n+\tpoolSize := 10\n+\tp, err := ants.NewPool(poolSize)\n+\tif err != nil {\n+\t\tt.Fatalf(\""create TimingPool failed: %s\"", err.Error())\n+\t}\n+\tp.MaxBlockingSubmit = 1\n+\tdefer p.Release()\n+\tfor i := 0; i < poolSize-1; i++ {\n+\t\tif err := p.Submit(longRunningFunc); err != nil {\n+\t\t\tt.Fatalf(\""submit when pool is not full shouldn't return error\"")\n+\t\t}\n+\t}\n+\tch := make(chan struct{})\n+\tf := func() {\n+\t\t<-ch\n+\t}\n+\t// p is full now.\n+\tif err := p.Submit(f); err != nil {\n+\t\tt.Fatalf(\""submit when pool is not full shouldn't return error\"")\n+\t}\n+\tvar wg sync.WaitGroup\n+\twg.Add(1)\n+\tgo func() {"",""path"":""ants_test.go"",""position"":60,""original_position"":59,""commit_id"":""58466b12b03a603d9f0331bbcc64a7557b27865d"",""original_commit_id"":""ee1ad289e5af90bd7ee573f2ff1c968e57e3d69b"",""user"":{""login"":""golangcibot"",""id"":42910462,""node_id"":""MDQ6VXNlcjQyOTEwNDYy"",""avatar_url"":""https://avatars.githubusercontent.com/u/42910462?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/golangcibot"",""html_url"":""https://github.com/golangcibot"",""followers_url"":""https://api.github.com/users/golangcibot/followers"",""following_url"":""https://api.github.com/users/golangcibot/following{/other_user}"",""gists_url"":""https://api.github.com/users/golangcibot/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/golangcibot/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/golangcibot/subscriptions"",""organizations_url"":""https://api.github.com/users/golangcibot/orgs"",""repos_url"":""https://api.github.com/users/golangcibot/repos"",""events_url"":""https://api.github.com/users/golangcibot/events{/privacy}"",""received_events_url"":""https://api.github.com/users/golangcibot/received_events"",""type"":""User"",""site_admin"":false},""body"":""SA2002: the goroutine calls T.Fatalf, which must be called in the same goroutine as the test (from `staticcheck`)"",""created_at"":""2019-08-20T03:25:26Z"",""updated_at"":""2019-08-20T10:31:55Z"",""html_url"":""https://github.com/panjf2000/ants/pull/41#discussion_r315493235"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/41"",""author_association"":""NONE"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315493235""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/41#discussion_r315493235""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/41""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315493235/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":475,""original_line"":475,""side"":""RIGHT""}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
12,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315497949"",""pull_request_review_id"":276920486,""id"":315497949,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNTQ5Nzk0OQ=="",""diff_hunk"":""@@ -236,8 +253,18 @@ func (p *Pool) retrieveWorker() *Worker {\n \t\tp.lock.Unlock()\n \t\tspawnWorker()\n \t} else {\n+\t\tif p.NonblockingSubmit {\n+\t\t\tp.lock.Unlock()\n+\t\t\treturn nil\n+\t\t}\n \tReentry:\n+\t\tif p.MaxBlockingSubmit != 0 && p.blockingNum >= p.MaxBlockingSubmit {"",""path"":""pool.go"",""position"":null,""original_position"":42,""commit_id"":""58466b12b03a603d9f0331bbcc64a7557b27865d"",""original_commit_id"":""ee1ad289e5af90bd7ee573f2ff1c968e57e3d69b"",""user"":{""login"":""panjf2000"",""id"":7496278,""node_id"":""MDQ6VXNlcjc0OTYyNzg="",""avatar_url"":""https://avatars.githubusercontent.com/u/7496278?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/panjf2000"",""html_url"":""https://github.com/panjf2000"",""followers_url"":""https://api.github.com/users/panjf2000/followers"",""following_url"":""https://api.github.com/users/panjf2000/following{/other_user}"",""gists_url"":""https://api.github.com/users/panjf2000/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/panjf2000/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/panjf2000/subscriptions"",""organizations_url"":""https://api.github.com/users/panjf2000/orgs"",""repos_url"":""https://api.github.com/users/panjf2000/repos"",""events_url"":""https://api.github.com/users/panjf2000/events{/privacy}"",""received_events_url"":""https://api.github.com/users/panjf2000/received_events"",""type"":""User"",""site_admin"":false},""body"":""Are these two fields of `MaxBlockingSubmit` and `blockingNum` really necessary? From where I stand, the throttle of your business traffics should be the capacity of pool, if you've set up `nonblocking` as `true`, it returns nil once the amount of all running workers reaches the pool capacity, otherwise, it is blocked until there is worker available.\r\n\r\nWhy did you add these two fields? is there any specific scenario?"",""created_at"":""2019-08-20T03:59:00Z"",""updated_at"":""2019-08-20T10:31:55Z"",""html_url"":""https://github.com/panjf2000/ants/pull/41#discussion_r315497949"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/41"",""author_association"":""OWNER"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315497949""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/41#discussion_r315497949""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/41""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315497949/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":null,""original_line"":261,""side"":""RIGHT""}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
13,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315498393"",""pull_request_review_id"":276920486,""id"":315498393,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNTQ5ODM5Mw=="",""diff_hunk"":""@@ -151,7 +164,11 @@ func (p *Pool) Submit(task func()) error {\n \tif atomic.LoadInt32(&p.release) == CLOSED {\n \t\treturn ErrPoolClosed\n \t}\n-\tp.retrieveWorker().task <- task\n+\tw := p.retrieveWorker()\n+\tif w == nil {"",""path"":""pool.go"",""position"":null,""original_position"":26,""commit_id"":""58466b12b03a603d9f0331bbcc64a7557b27865d"",""original_commit_id"":""ee1ad289e5af90bd7ee573f2ff1c968e57e3d69b"",""user"":{""login"":""panjf2000"",""id"":7496278,""node_id"":""MDQ6VXNlcjc0OTYyNzg="",""avatar_url"":""https://avatars.githubusercontent.com/u/7496278?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/panjf2000"",""html_url"":""https://github.com/panjf2000"",""followers_url"":""https://api.github.com/users/panjf2000/followers"",""following_url"":""https://api.github.com/users/panjf2000/following{/other_user}"",""gists_url"":""https://api.github.com/users/panjf2000/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/panjf2000/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/panjf2000/subscriptions"",""organizations_url"":""https://api.github.com/users/panjf2000/orgs"",""repos_url"":""https://api.github.com/users/panjf2000/repos"",""events_url"":""https://api.github.com/users/panjf2000/events{/privacy}"",""received_events_url"":""https://api.github.com/users/panjf2000/received_events"",""type"":""User"",""site_admin"":false},""body"":""This section could be refined as:\r\n```go\r\nif w := p.retrieveWorker(); w == nil {\r\n    return ErrPoolBlocked\r\n} else {\r\n    w.task <- task\r\n}\r\n```"",""created_at"":""2019-08-20T04:02:19Z"",""updated_at"":""2019-08-20T10:31:55Z"",""html_url"":""https://github.com/panjf2000/ants/pull/41#discussion_r315498393"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/41"",""author_association"":""OWNER"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315498393""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/41#discussion_r315498393""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/41""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315498393/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":null,""original_line"":168,""side"":""RIGHT""}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
14,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315498823"",""pull_request_review_id"":276920486,""id"":315498823,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNTQ5ODgyMw=="",""diff_hunk"":""@@ -51,6 +51,9 @@ var (\n \n \t// ErrPoolClosed will be returned when submitting task to a closed pool.\n \tErrPoolClosed = errors.Default.New(\""this pool has been closed\"")\n+\n+\t// ErrPoolBlocked will be returned when the pool is full and no workers available.\n+\tErrPoolBlocked = errors.Default.New(\""too many goroutines blocked on submit or NonblockingSubmit is set\"")"",""path"":""ants.go"",""position"":null,""original_position"":6,""commit_id"":""58466b12b03a603d9f0331bbcc64a7557b27865d"",""original_commit_id"":""ee1ad289e5af90bd7ee573f2ff1c968e57e3d69b"",""user"":{""login"":""panjf2000"",""id"":7496278,""node_id"":""MDQ6VXNlcjc0OTYyNzg="",""avatar_url"":""https://avatars.githubusercontent.com/u/7496278?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/panjf2000"",""html_url"":""https://github.com/panjf2000"",""followers_url"":""https://api.github.com/users/panjf2000/followers"",""following_url"":""https://api.github.com/users/panjf2000/following{/other_user}"",""gists_url"":""https://api.github.com/users/panjf2000/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/panjf2000/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/panjf2000/subscriptions"",""organizations_url"":""https://api.github.com/users/panjf2000/orgs"",""repos_url"":""https://api.github.com/users/panjf2000/repos"",""events_url"":""https://api.github.com/users/panjf2000/events{/privacy}"",""received_events_url"":""https://api.github.com/users/panjf2000/received_events"",""type"":""User"",""site_admin"":false},""body"":""The name of `ErrPoolBlocked` is blurry and unable to tell why it is being blocked, I would suggest `ErrPoolOverload` or `ErrPoolOverflow`."",""created_at"":""2019-08-20T04:05:11Z"",""updated_at"":""2019-08-20T10:31:55Z"",""html_url"":""https://github.com/panjf2000/ants/pull/41#discussion_r315498823"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/41"",""author_association"":""OWNER"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315498823""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/41#discussion_r315498823""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/41""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315498823/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":null,""original_line"":56,""side"":""RIGHT""}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
15,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315499067"",""pull_request_review_id"":276920486,""id"":315499067,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNTQ5OTA2Nw=="",""diff_hunk"":""@@ -60,6 +60,19 @@ type Pool struct {\n \t// PanicHandler is used to handle panics from each worker goroutine.\n \t// if nil, panics will be thrown out again from worker goroutines.\n \tPanicHandler func(interface{})\n+\n+\t// Max number of goroutine blocking on pool.Submit.\n+\t// 0 (default value) means no such limit.\n+\tMaxBlockingSubmit int32"",""path"":""pool.go"",""position"":null,""original_position"":7,""commit_id"":""58466b12b03a603d9f0331bbcc64a7557b27865d"",""original_commit_id"":""ee1ad289e5af90bd7ee573f2ff1c968e57e3d69b"",""user"":{""login"":""panjf2000"",""id"":7496278,""node_id"":""MDQ6VXNlcjc0OTYyNzg="",""avatar_url"":""https://avatars.githubusercontent.com/u/7496278?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/panjf2000"",""html_url"":""https://github.com/panjf2000"",""followers_url"":""https://api.github.com/users/panjf2000/followers"",""following_url"":""https://api.github.com/users/panjf2000/following{/other_user}"",""gists_url"":""https://api.github.com/users/panjf2000/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/panjf2000/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/panjf2000/subscriptions"",""organizations_url"":""https://api.github.com/users/panjf2000/orgs"",""repos_url"":""https://api.github.com/users/panjf2000/repos"",""events_url"":""https://api.github.com/users/panjf2000/events{/privacy}"",""received_events_url"":""https://api.github.com/users/panjf2000/received_events"",""type"":""User"",""site_admin"":false},""body"":""If this field is necessary, rename it to `MaxBlockingTasks`."",""created_at"":""2019-08-20T04:06:45Z"",""updated_at"":""2019-08-20T10:31:55Z"",""html_url"":""https://github.com/panjf2000/ants/pull/41#discussion_r315499067"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/41"",""author_association"":""OWNER"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315499067""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/41#discussion_r315499067""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/41""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315499067/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":null,""original_line"":66,""side"":""RIGHT""}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146
16,"{""ConnectionId"":1,""Name"":""panjf2000/ants""}","{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315499281"",""pull_request_review_id"":276920486,""id"":315499281,""node_id"":""MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNTQ5OTI4MQ=="",""diff_hunk"":""@@ -60,6 +60,19 @@ type Pool struct {\n \t// PanicHandler is used to handle panics from each worker goroutine.\n \t// if nil, panics will be thrown out again from worker goroutines.\n \tPanicHandler func(interface{})\n+\n+\t// Max number of goroutine blocking on pool.Submit.\n+\t// 0 (default value) means no such limit.\n+\tMaxBlockingSubmit int32\n+\n+\t// goroutine already been blocked on pool.Submit\n+\t// protected by pool.lock\n+\tblockingNum int32\n+\n+\t// When NonblockingSubmit is true, Pool.Submit will never be blocked.\n+\t// ErrPoolBlocked will be returned when Pool.Submit cannot be done at once.\n+\t// When NonblockingSubmit is true, MaxBlockingSubmit is inoperative.\n+\tNonblockingSubmit bool"",""path"":""pool.go"",""position"":null,""original_position"":16,""commit_id"":""58466b12b03a603d9f0331bbcc64a7557b27865d"",""original_commit_id"":""ee1ad289e5af90bd7ee573f2ff1c968e57e3d69b"",""user"":{""login"":""panjf2000"",""id"":7496278,""node_id"":""MDQ6VXNlcjc0OTYyNzg="",""avatar_url"":""https://avatars.githubusercontent.com/u/7496278?v=4"",""gravatar_id"":"""",""url"":""https://api.github.com/users/panjf2000"",""html_url"":""https://github.com/panjf2000"",""followers_url"":""https://api.github.com/users/panjf2000/followers"",""following_url"":""https://api.github.com/users/panjf2000/following{/other_user}"",""gists_url"":""https://api.github.com/users/panjf2000/gists{/gist_id}"",""starred_url"":""https://api.github.com/users/panjf2000/starred{/owner}{/repo}"",""subscriptions_url"":""https://api.github.com/users/panjf2000/subscriptions"",""organizations_url"":""https://api.github.com/users/panjf2000/orgs"",""repos_url"":""https://api.github.com/users/panjf2000/repos"",""events_url"":""https://api.github.com/users/panjf2000/events{/privacy}"",""received_events_url"":""https://api.github.com/users/panjf2000/received_events"",""type"":""User"",""site_admin"":false},""body"":""I think `Nonblocking` is enough."",""created_at"":""2019-08-20T04:08:21Z"",""updated_at"":""2019-08-20T10:31:55Z"",""html_url"":""https://github.com/panjf2000/ants/pull/41#discussion_r315499281"",""pull_request_url"":""https://api.github.com/repos/panjf2000/ants/pulls/41"",""author_association"":""OWNER"",""_links"":{""self"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315499281""},""html"":{""href"":""https://github.com/panjf2000/ants/pull/41#discussion_r315499281""},""pull_request"":{""href"":""https://api.github.com/repos/panjf2000/ants/pulls/41""}},""reactions"":{""url"":""https://api.github.com/repos/panjf2000/ants/pulls/comments/315499281/reactions"",""total_count"":0,""+1"":0,""-1"":0,""laugh"":0,""hooray"":0,""confused"":0,""heart"":0,""rocket"":0,""eyes"":0},""start_line"":null,""original_start_line"":null,""start_side"":null,""line"":null,""original_line"":75,""side"":""RIGHT""}",https://api.github.com/repos/panjf2000/ants/pulls/comments?direction=asc&page=1&per_page=100,null,2022-07-13 01:44:58.146